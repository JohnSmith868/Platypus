gws=this.gws||{};gws.settings={global:{initialScene:"scene-1",fps:60,rootElement:"root"},assets:[{id:"powerup",src:{ogg:"a/powerup.ogg",mp3:"a/powerup.mp3"}},{id:"alpha",src:"i/test.png",data:{rows:2,columns:2,ids:[["horizon","sky"],["ground","rock"]]}},{id:"beta",src:"i/mookie.png"},{id:"tilemap",src:"i/tile-map.png"},{id:"test",src:"i/test.png"},{id:"test-animation",src:"i/test-animation.png"}],classes:{Game:{id:"Game",src:"../src/js/game.js"},Input:{id:"Input",src:"../src/js/input.js"},Entity:{id:"Entity",src:"../src/js/entity.js"},Layer:{id:"Layer",src:"../src/js/layer.js"},Scene:{id:"Scene",src:"../src/js/scene.js"}},components:{"entity-container":{id:"entity-container",src:"../src/js/entity/entity-container.js"},"entity-controller":{id:"entity-controller",src:"../src/js/entity/entity-controller.js"},"layer-controller":{id:"layer-controller",src:"../src/js/layer/layer-controller.js"},"tiled-loader":{id:"tiled-loader",src:"../src/js/layer/tiled-loader.js"},"lc-render":{id:"lc-render",src:"../src/js/layer/lc-render.js"},"lc-logic":{id:"lc-logic",src:"../src/js/layer/lc-logic.js"},"lc-camera":{id:"lc-camera",src:"../src/js/layer/lc-camera.js"},"lc-basic-collision":{id:"lc-basic-collision",src:"../src/js/layer/lc-basic-collision.js"},"render-debug":{id:"render-debug",src:"../src/js/entity/render-debug.js"},"render-tile":{id:"render-tile",src:"../src/js/entity/render-tile.js"},"render-tiles":{id:"render-tiles",src:"../src/js/entity/render-tiles.js"},"render-button":{id:"render-button",src:"../src/js/entity/render-button.js"},"render-hero":{id:"render-hero",src:"../src/js/entity/render-hero.js"},"logic-button":{id:"logic-button",src:"../src/js/entity/logic-button.js"},"logic-hero":{id:"logic-hero",src:"../src/js/entity/logic-hero.js"},"collision-hero":{id:"collision-hero",src:"../src/js/entity/collision-hero.js"}},entities:{tile:{id:"tile",components:[{type:"render-tile",spritesheet:"import"}]},"tile-layer":{id:"tile-layer",components:[{type:"render-tiles",spritesheet:"import",imageMap:"import"}]},button:{id:"button",assets:[{id:"mookie-standing",src:"../../images/mookie.png"}],components:[{type:"entity-controller",controlMap:{"key:a":"go-left","key:left-arrow":"go-left","key:d":"go-right","key:right-arrow":"go-right","mouse:left-button":"go-left","mouse:right-button":"go-right"}},{type:"logic-button"},{type:"render-button"},{type:"render-debug"}],properties:{"debug-events":["go-left","go-right"],state:false,x:10,y:10,width:24,height:24}},hero:{id:"hero",components:[{type:"entity-controller",controlMap:{"key:w":"key-up","key:up-arrow":"key-up","key:a":"key-left","key:left-arrow":"key-left","key:s":"key-down","key:down-arrow":"key-down","key:d":"key-right","key:right-arrow":"key-right"}},{type:"logic-hero"},{type:"collision-hero",AABB:[0,0,24,24],collisionType:"hero",collidesWith:["solid"]},{type:"render-hero",spriteSheet:{images:["test-animation"],frames:{width:24,height:24,regY:24},animations:{"standing-north":[0],"standing-east":[3],"standing-south":[6],"standing-west":[9],"walking-north":{frames:[0,1,2,1],frequency:4},"walking-east":{frames:[3,4,5,4],frequency:4},"walking-south":{frames:[6,7,8,7],frequency:4},"walking-west":{frames:[9,10,11,10],frequency:4}}}},{type:"render-debug",regY:24}],properties:{"debug-events":["key:a:up","key:a:down","go-left"],x:10,y:10,width:24,height:24,state:"standing",heading:"south"}},block:{id:"block",components:[{type:"collision-hero",AABB:[0,0,24,24]},{type:"render-debug",regY:24}],properties:{"debug-events":["key:a:up","key:a:down","go-left"],x:50,y:50,width:24,height:24}}},includes:{EaselJS:{id:"EaselJS",src:"http://code.createjs.com/easeljs-0.5.0.min.js"},TweenJS:{id:"TweenJS",src:"http://code.createjs.com/tweenjs-0.3.0.min.js"},SoundJS:{id:"SoundJS",src:"http://code.createjs.com/soundjs-0.3.0.min.js"},PreloadJS:{id:"PreloadJS",src:"http://code.createjs.com/preloadjs-0.2.0.min.js"},Browser:{id:"Browser",src:"../src/js/browser.js"},Main:{id:"Main",src:"../src/js/main.js"},GameCSS:{id:"GameCSS",src:"../src/css/game.css"}},scenes:{"scene-menu":{layers:[{id:"buttons",components:[{type:"lc-logic"},{type:"lc-render"},{type:"layer-controller"},{type:"entity-container",entities:[{type:"button"}]}]}],id:"scene-menu"},"scene-1":{layers:[{id:"action",components:[{type:"lc-logic"},{type:"lc-basic-collision"},{type:"lc-render"},{type:"layer-controller"},{type:"entity-container"},{type:"tiled-loader",level:"level-1"}]}],id:"scene-1"}},levels:{"level-1":{height:20,layers:[{data:[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,8,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20],height:20,name:"background",opacity:1,type:"tilelayer",visible:true,width:20,x:0,y:0},{data:[17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,15,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,22,16,16,16,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,23,0,15,16,16,16,16,16,17,0,15,17,0,0,15,16,16,16,16,22,23,0,0,0,0,0,0,0,0,0,0,23,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,22,17,0,0,0,0,0,0,21,23,0,0,0,0,0,0,0,0,0,0,0,22,17,0,0,0,0,0,21,22,16,16,16,17,0,0,0,0,0,0,0,0,22,16,16,16,17,0,21,23,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,21,5,0,0,0,0,0,0,9,9,0,0,0,0,0,0,0,0,0,0,21,23,0,0,0,0,0,0,9,0,0,0,0,0,0,0,0,0,0,0,21,5,0,0,0,0,0,3,3,15,17,3,3,3,0,0,0,0,0,0,4,5,0,0,0,0,0,3,3,21,23,9,9,9,17,0,0,0,0,0,4,23,0,0,0,0,0,3,3,21,23,9,9,15,22,17,9,9,9,9,21,22,16,16,16,16,16,16,16,22,22,16,16,22,22,22,16,16,16,16,22],height:20,name:"map",opacity:1,type:"tilelayer",visible:true,width:20,x:0,y:0},{height:20,name:"guys",objects:[{gid:19,height:0,name:"",properties:{},type:"hero",width:0,x:49,y:144},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:257,y:156},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:281,y:142},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:306,y:152},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:363,y:266},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:47,y:272},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:142,y:328},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:251,y:449},{gid:6,height:0,name:"",properties:{},type:"",width:0,x:424,y:428},{gid:12,height:0,name:"",properties:{},type:"",width:0,x:167,y:192},{gid:18,height:0,name:"",properties:{},type:"",width:0,x:409,y:191},{gid:18,height:0,name:"",properties:{},type:"",width:0,x:409,y:166},{gid:24,height:0,name:"",properties:{},type:"",width:0,x:364,y:193},{gid:28,height:0,name:"",properties:{},type:"",width:0,x:144,y:384},{height:37,name:"",properties:{},type:"",width:35,x:419,y:64},{height:29,name:"",properties:{},type:"",width:46,x:73,y:402},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:96,y:288},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:192,y:384},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:144,y:360},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:216,y:360},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:120,y:456},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:96,y:264},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:216,y:384},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:120,y:432},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:120,y:408},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:72,y:456},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:96,y:456},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:240,y:384},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:288,y:240},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:288,y:216},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:288,y:192},{gid:10,height:0,name:"",properties:{},type:"",width:0,x:96,y:144}],opacity:1,type:"objectgroup",visible:true,width:20,x:0,y:0}],orientation:"orthogonal",properties:{timer:"12"},tileheight:24,tilesets:[{firstgid:1,image:"../src/images/tile-map.png",imageheight:96,imagewidth:144,margin:0,name:"tilemap",properties:{},spacing:0,tileheight:24,tileproperties:{"11":{entity:"sign"},"17":{entity:"enemy"},"18":{entity:"mookie"},"23":{entity:"flower"},"5":{entity:"gem"},"9":{entity:"block"}},tilewidth:24},{firstgid:25,image:"../src/images/test.png",imageheight:48,imagewidth:48,margin:0,name:"test",properties:{},spacing:0,tileheight:24,tileproperties:{"3":{a:"b"}},tilewidth:24}],tilewidth:24,version:1,width:20,id:"level-1"}}};gws.classes={};gws.classes.game=(function(){var a=function(d){this.currentScene=undefined;this.settings=d;this.rootElement=document.createElement("div");this.rootElement.id=gws.settings.global.rootElement;document.getElementsByTagName("body")[0].appendChild(this.rootElement);this.loadScene(d.global.initialScene);var c=this;this.input=new gws.classes.input(function(e,f){c.currentScene.triggerInputEvent(e,f)});this.prevTime=0;this.timingFunction=false;if(performance&&performance.webkitNow){this.timingFunction=function(){return performance.webkitNow()}}else{if(performance&&performance.now){this.timingFunction=function(){return performance.now()}}else{this.date=new Date();this.timingFunction=function(){return this.date.getTime()}}}this.prevTime=this.timingFunction()},b=a.prototype;b.tick=function(){var c=this.timingFunction();var d=c-this.prevTime;this.prevTime=c;if(this.currentScene){this.currentScene.tick(d)}};b.loadScene=function(c){this.currentScene=new gws.classes.scene(this.settings.scenes[c],this.rootElement)};return a})();gws.classes.input=(function(){var c=function(d,e){return function(f){e(d,f)}},a=function(g){this.mouseX=0;this.mouseY=0;var f=this.element=window,d=this,e=["keydown","keyup"],h=this.bindings=[];for(eventIndex in e){h[e[eventIndex]]=c(e[eventIndex],g);f.addEventListener(e[eventIndex],h[e[eventIndex]],true)}},b=a.prototype;b.destroy=function(){var d=this.element;for(binding in this.bindings){d.removeEventListener(binding,this.bindings[binding],true)}};return a})();gws.classes.entity=(function(){var a=function(f,d){var l=this,i=undefined,h=undefined,e=f||{},c=e.components||[],k=e.properties||{},j=d||{},g=j.properties||{};l.components=[];l.messages=[];l.type=e.id;for(i in k){l[i]=k[i]}for(i in g){l[i]=g[i]}for(i in c){h=c[i];if(gws.components[h.type]){l.addComponent(new gws.components[h.type](l,h))}else{console.warn("Component '"+h.type+"' is not defined.",h)}}l.trigger("load")};var b=a.prototype;b.addComponent=function(c){this.components.push(c);return c};b.removeComponent=function(d){for(var c in this.components){if(this.components[c]===d){this.components.splice(c,1);d.destroy();return d}}return false};b.bind=function(c,d){if(!this.messages[c]){this.messages[c]=[]}this.messages[c].push(d)};b.unbind=function(d,e){if(!this.messages[d]){this.messages[d]=[]}for(var c in this.messages[d]){if(this.messages[d][c]===e){this.messages[d].splice(c,1);break}}};b.trigger=function(d,f){if(this["debug-events"]){for(var e in this["debug-events"]){if(this["debug-events"][e]==d){console.log(d,f)}}}if(this.messages[d]){for(var c in this.messages[d]){this.messages[d][c](f)}}};b.getMessageIds=function(){var d=[];for(var c in this.messages){d.push(c)}return d};b.destroy=function(){for(var c in this.components){this.removeComponent(this.components[c])}};return a})();gws.classes.layer=(function(){var a=function(e,c){var g=e.components,f=undefined;this.rootElement=c;this.components=[];this.tickMessages=[];this.messages=[];for(var d in g){f=g[d];this.addComponent(new gws.components[f.type||f.id](this,f))}this.trigger("load")},b=a.prototype;b.tick=function(c){for(var d in this.tickMessages){this.trigger(this.tickMessages[d],c)}};b.addComponent=function(d){var f=false,e=0,c=0;this.components.push(d);if(d.tickMessages){for(e in d.tickMessages){f=false;for(c in this.tickMessages){if(d.tickMessages[e]===this.tickMessages[c]){f=true}}if(!f){this.tickMessages.push(d.tickMessages[e])}}}return d};b.removeComponent=function(d){for(var c in this.components){if(this.components[c]===d){this.components.splice(c,1);d.destroy();return d}}return false};b.bind=function(d,c){if(!this.messages[d]){this.messages[d]=[]}this.messages[d].push(c)};b.unbind=function(d,c){if(!this.messages[d]){this.messages[d]=[]}for(var e in this.messages[d]){if(this.messages[d][e]===c){this.messages[d].splice(e,1);break}}};b.trigger=function(c,d){if(this.messages[c]){for(messageIndex in this.messages[c]){this.messages[c][messageIndex](d)}}};return a})();gws.classes.scene=(function(){var b=function(e,c){var f=e.layers;this.rootElement=c;this.layers=[];for(var d in f){this.layers.push(new gws.classes.layer(f[d],this.rootElement))}};var a=b.prototype;a.tick=function(d){for(var c in this.layers){this.layers[c].tick(d)}};a.triggerInputEvent=function(d,e){for(var c in this.layers){this.layers[c].trigger(d,e)}};return b})();gws.components={};gws.components["entity-container"]=(function(){var a=function(d,f){var e=this,c=0;this.owner=d;this.listeners=[];this.entities=[];this.definedEntities=f.entities;this.owner.entities=e.entities;this.owner.addEntity=function(g){e.addEntity(g)};this.owner.removeEntity=function(){return e.removeEntity()};this.addListeners(["load","add-entity","remove-entity"])};var b=a.prototype;b.load=function(){var c=0,d=this.definedEntities;this.definedEntities=false;if(d){for(c=0;c<d.length;c++){this.addEntity(new gws.classes.entity(gws.settings.entities[d[c].type],d[c]))}}};b.addEntity=b["add-entity"]=function(c){this.entities.push(c);this.owner.trigger("entity-added",c)};b.removeEntity=b["remove-entity"]=function(d){for(var c=0;c<this.entities.length;c++){if(this.entities[c]===d){this.entities.splice(c,1);d.destroy();return d}}return false};b.destroy=function(){this.removeListeners(this.listeners);for(var c in this.entities){entity.destroy()}this.entities.length=0};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["entity-controller"]=(function(){var e=function(){this.current=false;this.last=false;this.state=false},g=["left-button","middle-button","right-button"],c=function(h){return function(i){h.state=false}},b=function(h){return function(i){h.current=true;h.state=true;if(i&&(typeof(i.over)!=="undefined")){h.over=i.over}}},a=function(h,j){var i="",k=undefined;this.owner=h;this.listeners=[];this.addListeners(["load","controller","controller:load","controller:tick"]);this.acceptMouseInput=false;this.acceptTouchInput=false;if(j&&j.controlMap){this.actions={};for(i in j.controlMap){k=this.actions[j.controlMap[i]];if(!k){k=this.actions[j.controlMap[i]]=new e()}d[i+":up"]=c(k);d[i+":down"]=b(k);this.addListener(i+":up");this.addListener(i+":down");if(i.indexOf("mouse")>-1){this.acceptMouseInput=true}if(i.indexOf("touch")>-1){this.acceptTouchInput=true}}}},f=e.prototype,d=a.prototype;f.update=function(){this.last=this.current;this.current=this.state};f.isPressed=function(){return this.current};f.isTriggered=function(){return this.current&&!this.last};f.isReleased=function(){return !this.current&&this.last};d.load=function(){self=this;if(this.acceptMouseInput){this.owner.trigger("controller:input-handler",{mousedown:function(h,i){self.owner.trigger("mouse:"+g[h.button]+":down",{over:i})},mouseup:function(h,i){self.owner.trigger("mouse:"+g[h.button]+":up",{over:i})},mousemove:function(h,i){self.owner.trigger("mouse:move",{over:i})}})}if(this.acceptTouchInput){this.owner.trigger("controller:input-handler",{touchdown:function(h,i){self.owner.trigger("touch:down",{over:i})},touchup:function(h,i){self.owner.trigger("touch:up",{over:i})},touchmove:function(h,i){self.owner.trigger("touch:move",{over:i})}})}};d["mouse:move"]=function(h){if(this.actions["mouse:left-button"]&&(this.actions["mouse:left-button"].over!==h.over)){this.actions["mouse:left-button"].over=h.over}if(this.actions["mouse:middle-button"]&&(this.actions["mouse:middle-button"].over!==h.over)){this.actions["mouse:middle-button"].over=h.over}if(this.actions["mouse:right-button"]&&(this.actions["mouse:right-button"].over!==h.over)){this.actions["mouse:right-button"].over=h.over}};d["touch:move"]=function(h){if(this.actions.touch&&(this.actions.touch.over!==h.over)){this.actions.touch.over=h.over}};d.controller=function(){};d["controller:load"]=function(){};d["controller:tick"]=function(j){var i=undefined,h="";if(this.actions){for(h in this.actions){i=this.actions[h];if(i.current||i.last){this.owner.trigger(h,{pressed:i.current,released:!i.current&&i.last,triggered:i.current&&!i.last,over:i.over})}i.update()}}};d.destroy=function(){this.removeListeners(this.listeners)};d.addListeners=function(i){for(var h in i){this.addListener(i[h])}};d.removeListeners=function(i){for(var h in i){this.removeListener(h,i[h])}};d.addListener=function(i,k){var h=this,j=k||function(l){h[i](l)};this.owner.bind(i,j);this.listeners[i]=j};d.removeListener=function(h,i){this.owner.unbind(h,i)};return a})();gws.components["layer-controller"]=(function(){var c={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"},a=function(d,e){this.owner=d;this.entities=[];this.listeners=[];this.tickMessages=["check-inputs"];this.addListeners(["entity-added","check-inputs","keydown","keyup","mousedown","mousemove","mouseup","touchstart","touchmove","touchend","touchcancel"])},b=a.prototype;b.keydown=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("key:"+(c["kc"+e.keyCode]||("key-code-"+e.keyCode))+":down",e)}};b.keyup=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("key:"+(c["kc"+e.keyCode]||("key-code-"+e.keyCode))+":up",e)}};b.mousedown=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("mouse:"+mouseMap[e.button]+":down",e)}};b.mouseup=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("mouse:"+mouseMap[e.button]+":up",e)}};b.touchstart=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("touch:down",e)}};b.touchend=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("touch:up",e)}};b.touchmove=b.touchcancel=b.mousemove=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger(e.type,e)}};b["check-inputs"]=function(e){for(var d=0;d<this.entities.length;d++){this.entities[d].trigger("controller:tick")}};b["entity-added"]=function(e){var f=e.getMessageIds();for(var d=0;d<f.length;d++){if(f[d]=="controller"){this.entities.push(e);e.trigger("controller:load");break}}};b.destroy=function(){this.removeListeners(this.listeners);this.entities.length=0};b.addListeners=function(e){for(var d in e){this.addListener(e[d])}};b.removeListeners=function(e){for(var d in e){this.removeListener(d,e[d])}};b.addListener=function(e,g){var d=this,f=g||function(h){d[e](h)};this.owner.bind(e,f);this.listeners[e]=f};b.removeListener=function(d,e){this.owner.unbind(d,e)};return a})();gws.components["tiled-loader"]=(function(){var a=function(c,d){this.owner=c;this.entities=[];this.listeners=[];this.addListeners(["load"]);this.level=gws.settings.levels[d.level];this.tileEntityId=d.tileEntityId||"tile";this.tileLayerEntityId=d.tileLayerEntityId||"tile-layer"},b=a.prototype;b.load=function(){var c=0;for(;c<this.level.layers.length;c++){this.setupLayer(this.level.layers[c],this.level)}this.owner.removeComponent(this)};b.setupLayer=function(t,d){var q=t.width,p=t.height,j=[],s=d.tilesets,c=d.tilewidth,g=d.tileheight,i=0,h=0,l=0,k=undefined,r="",o=undefined,e=undefined,m=undefined,n=undefined,f=undefined,u=undefined;for(i=0;i<s.length;i++){if(gws.assets[s[i].name]){j.push(gws.assets[s[i].name])}else{j.push(s[i].image)}}if(t.type=="tilelayer"){m=JSON.parse(JSON.stringify(gws.settings.entities[this.tileLayerEntityId]));n={};f=[];u=[];m.properties=m.properties||{};m.properties.width=c*q;m.properties.height=g*p;m.properties.columns=q;m.properties.rows=p;m.properties.tileWidth=c;m.properties.tileHeight=g;for(i=0;i<p;i++){f[i]=[];u[i]=[];for(h=0;h<p;h++){if(typeof n["tile"+(+t.data[i+h*q]-1)]=="undefined"){n["tile"+(+t.data[i+h*q]-1)]=+t.data[i+h*q]-1}f[i][h]=+t.data[i+h*q]-1;u[i][h]="tile"+(+t.data[i+h*q]-1)}}for(i=0;i<m.components.length;i++){if(m.components[i].spritesheet=="import"){m.components[i].spritesheet={images:j,frames:{width:c,height:g},animations:n}}if(m.components[i].collisionMap=="import"){m.components[i].collisionMap=f}if(m.components[i].imageMap=="import"){m.components[i].imageMap=u}}this.owner.addEntity(new gws.classes.entity(m,{properties:{}}))}else{if(t.type=="objectgroup"){for(l=0;l<t.objects.length;l++){k=t.objects[l];for(i=0;i<s.length;i++){if(s[i].firstgid>k.gid){break}else{o=s[i]}}r="";if(k.type!==""){r=k.type}else{if(o.tileproperties[k.gid-1]){if(o.tileproperties[k.gid-1].entity){r=o.tileproperties[k.gid-1].entity}else{if(o.tileproperties[k.gid-1].type){r=o.tileproperties[k.gid-1].type}}}}if(r!==""){e={};for(i in k.properties){e[i]=k.properties[i]}e.x=k.x;e.y=k.y;e.width=k.width||c;e.height=k.height||g;this.owner.addEntity(new gws.classes.entity(gws.settings.entities[r],{properties:e}))}}}}};b.destroy=function(){this.removeListeners(this.listeners);this.entities.length=0};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["lc-render"]=(function(){var a=function(c,d){this.owner=c;this.entities=[];this.listeners=[];this.tickMessages=["render"];this.addListeners(["entity-added","render","camera-update"]);this.canvas=document.createElement("canvas");this.owner.rootElement.appendChild(this.canvas);this.canvas.style.width="100%";this.canvas.style.height="100%";this.canvas.width=1024;this.canvas.height=768;this.stage=new createjs.Stage(this.canvas)};var b=a.prototype;b["entity-added"]=function(e){var d=this,f=e.getMessageIds();for(var c=0;c<f.length;c++){if(f[c]=="layer:render"){this.entities.push(e);e.trigger("layer:render-load",{stage:this.stage,parentElement:this.owner.rootElement});break}}};b.render=function(){for(var c=0;c<this.entities.length;c++){this.entities[c].trigger("layer:render")}this.stage.update()};b["camera-update"]=function(c){this.stage.setTransform(-c.x,-c.y)};b.destroy=function(){this.removeListeners(this.listeners);this.stage=undefined;this.owner.rootElement.removeChild(this.canvas);this.canvas=undefined;this.entities.length=0};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["lc-logic"]=(function(){var a=function(c,d){this.owner=c;this.entities=[];this.listeners=[];this.tickMessages=["logic"];this.addListeners(["entity-added","logic"])};var b=a.prototype;b["entity-added"]=function(e){var d=this,f=e.getMessageIds();for(var c=0;c<f.length;c++){if(f[c]=="layer:logic"){this.entities.push(e);break}}};b.logic=function(d){for(var c=0;c<this.entities.length;c++){this.entities[c].trigger("layer:logic",d)}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["lc-camera"]=(function(){var a=function(c,d){this.owner=c;this.entities=[];this.listeners=[];this.tickMessages=["camera"];this.addListeners(["resize","camera","load"]);this.portalTop=this.owner.rootElement.innerTop;this.portalLeft=this.owner.rootElement.innerLeft;this.portalWidth=this.owner.rootElement.offsetWidth;this.portalHeight=this.owner.rootElement.offsetHeight;this.width=d.width;this.height=d.height;this.left=0;this.top=0;this.worldWidth=0;this.worldHeight=0;this.worldPerScreenUnitWidth=this.width/this.portalWidth;this.worldPerScreenUnitHeight=this.height/this.portalHeight;this.screenPerWorldUnitWidth=this.portalWidth/this.width;this.screenPerWorldUnitHeight=this.portalHeight/this.height;this.following=undefined;this.state="static";this.boundingBoxLeft=100;this.boundingBoxTop=100;this.boundingBoxWidth=this.width-(2*this.boundingBoxLeft);this.boundingBoxHeight=this.height-(2*this.boundingBoxTop);this.direction=true};var b=a.prototype;b.load=function(){this.worldWidth=this.owner.worldWidth||2048;this.worldHeight=this.owner.worldHeight||768};b.camera=function(c){switch(this.state){case"following":this.followingFunction(this.following);break;case"roaming":var d=0.3*c;if(this.direction){this.move(this.left+d,this.top);if(this.left==this.worldWidth-this.width){this.direction=!this.direction}}else{this.move(this.left-d,this.top);if(this.left==0){this.direction=!this.direction}}break;case"static":default:break}this.owner.trigger("camera-update",{x:this.left,y:this.top})};b.resize=function(){this.portalTop=rootElement.innerTop;this.portalLeft=rootElement.innerLeft;this.portalWidth=rootElement.offsetWidth;this.portalHeight=rootElement.offsetHeight;this.worldPerScreenUnitWidth=this.width/this.portalWidth;this.worldPerScreenUnitHeight=this.height/this.portalHeight;this.screenPerWorldUnitWidth=this.portalWidth/this.width;this.screenPerWorldUnitHeight=this.portalHeight/this.height};b.follow=function(e,c,d){switch(e){case"locked":this.following=c;this.followingFunction=this.lockedFollow;case"bounding":this.following=c;this.setBoundingArea(d.top,d.left,d.width,d.height);this.followingFunction=this.boundingFollow;case"custom":this.following=c;this.followingFunction=d.followingFunction;case"static":default:this.following=undefined;this.followingFunction=undefined}};b.move=function(d,c){if(d+this.width>this.worldWidth){this.left=this.worldWidth-this.width}else{if(d<0){this.left=0}else{this.left=d}}if(c+this.height>this.worldHeight){this.top=this.worldHeight-this.height}else{if(c<0){this.top=0}else{this.top=c}}};b.lockedFollow=function(c){this.move(c.x-(this.width/2),c.y-(this.height/2))};b.setBoundingArea=function(f,e,d,c){this.boundingBoxTop=f||100;this.boundingBoxLeft=e||100;this.boundingBoxWidth=d||this.width-(2*this.boundingBoxLeft);this.boundingBoxHeight=c||this.height-(2*this.boundingBoxTop)};b.boundingFollow=function(d){var e=0;var c=0;if(d.x>this.x+this.boundingBoxLeft+this.BoundingBoxWidth){e=d.x-(this.boundingBoxLeft+this.BoundingBoxWidth)}else{if(d.x<this.x+this.boundingBoxLeft){e=d.x-this.boundingBoxLeft}}if(d.y>this.y+this.boundingBoxTop+this.BoundingBoxHeight){c=d.y-this.boundingBoxTop+this.BoundingBoxHeight}else{if(d.y<this.y+this.boundingBoxTop){c=d.y-this.boundingBoxTop}}this.move(e,c)};b.screenToWorld=function(c){var d=[];d[0]=Math.round((c[0]-this.portalLeft)*this.worldPerScreenUnitWidth);d[1]=Math.round((c[1]-this.portalTop)*this.worldPerScreenUnitHeight);return d};b.worldToScreen=function(d){var c=[];c[0]=Math.round((d[0]*this.screenPerWorldUnitWidth)+this.portalLeft);c[1]=Math.round((d[1]*this.screenPerWorldUnitHeight)+this.portalTop);return c};b.destroy=function(){this.removeListeners(this.listeners);this.entities.length=0};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["lc-basic-collision"]=(function(){var a=function(c,d){this.owner=c;this.entities=[];this.listeners=[];this.tickMessages=["collision"];this.addListeners(["load","entity-added","collision"]);this.toResolve=[];this.collisionMatrix={}};var b=a.prototype;b["entity-added"]=function(e){var d=this;var f=e.getMessageIds();for(var c=0;c<f.length;c++){if(f[c]=="layer:collision"){this.entities.push(e);if(!this.collisionMatrix[e.type]){this.collisionMatrix[e.type]={};for(var c=0;c<e.collidesWith.length;c++){this.collisionMatrix[e.type][e.collidesWith[c]]=true}}break}}};b.load=function(){};b.collision=function(c){this.checkCollision();this.resolveCollisions()};b.checkCollision=function(){for(var c=0;c<this.entities.length-1;c++){for(var e=c+1;e<this.entities.length;e++){if(this.collisionMatrix[this.entities[c].type][this.entities[e].collisionType]||this.collisionMatrix[this.entities[e].type][this.entities[c].collisionType]){if(this.AABBCollision(this.entities[c],this.entities[e])){if(this.preciseCollision(this.entities[c],this.entities[e])){if(this.collisionMatrix[this.entities[c].type][this.entities[e].collisionType]){var d=this.toResolve.length;this.toResolve[d]=[];this.toResolve[d][0]=this.entities[c];this.toResolve[d][1]=this.entities[e]}if(this.collisionMatrix[this.entities[e].type][this.entities[c].collisionType]){var d=this.toResolve.length;this.toResolve[d]=[];this.toResolve[d][0]=this.entities[e];this.toResolve[d][1]=this.entities[c]}}}}}}};b.AABBCollision=function(h,g){var d=h.x+h.AABB[0];var i=h.x+h.AABB[0]+h.AABB[2];var j=h.y+h.AABB[1];var l=h.y+h.AABB[1]+h.AABB[3];var c=g.x+g.AABB[0];var k=g.x+g.AABB[0]+g.AABB[2];var e=g.y+g.AABB[1];var f=g.y+g.AABB[1]+g.AABB[3];if(d>k){return false}if(i<c){return false}if(j>f){return false}if(l<e){return false}return true};b.preciseCollision=function(d,c){return true};b.resolveCollisions=function(){for(var c=0;c<this.toResolve.length;c++){this.toResolve[c][0].trigger("layer:resolve-collision",this.toResolve[c][1])}};b.destroy=function(){this.removeListeners(this.listeners);this.entities.length=0};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["render-debug"]=(function(){var a=function(c,d){this.owner=c;this.controllerEvents=undefined;this.regX=d.regX||0;this.regY=d.regY||0;this.listeners=[];this.addListeners(["layer:render","layer:render-load","controller:input-handler"])};var b=a.prototype;b["layer:render"]=function(c){this.shape.x=this.owner.x-this.regX;this.shape.y=this.owner.y-this.regY;this.txt.x=this.owner.x-this.regX+(this.owner.width/2);this.txt.y=this.owner.y-this.regY+(this.owner.height/2)};b["layer:render-load"]=function(h){var d=this.owner.x=this.owner.x||0,k=this.owner.y=this.owner.y||0,f=this.owner.width=this.owner.width||300,c=this.owner.height=this.owner.height||100,j=gws.settings.entities[this.owner.type]?(gws.settings.entities[this.owner.type].components||[]):[],g=[];for(var e in j){g[e]=j[e].type}this.stage=h.stage;this.txt=new createjs.Text(this.owner.type+"\n("+g.join(", ")+")");this.txt.x=d+f/2;this.txt.y=k+c/2;this.txt.textAlign="center";this.txt.textBaseline="middle";this.shape=new createjs.Shape((new createjs.Graphics()).beginStroke("#880").rect(0,0,f,c));this.stage.addChild(this.shape);this.stage.addChild(this.txt);if(this.controllerEvents){this["controller:input-handler"](this.controllerEvents)}};b["controller:input-handler"]=function(d){var f=false,c=d.mousedown,g=d.mouseup,e=d.mousemove;if(this.stage){if(c||g||e){this.stage.enableMouseOver();this.shape.onPress=function(h){if(c){c(h.nativeEvent,f,h.stageX,h.stageY)}if(g){h.onMouseUp=function(i){g(i.nativeEvent,f,i.stageX,i.stageY)}}if(e){h.onMouseMove=function(i){e(i.nativeEvent,f,i.stageX,i.stageY)}}};this.shape.onMouseOut=function(){f=false};this.shape.onMouseOver=function(){f=true}}}else{this.controllerEvents=d}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["render-tile"]=(function(){var a=function(c,d){this.owner=c;this.spriteSheet=new createjs.SpriteSheet(d.spritesheet);this.state=d.state||"tile";this.listeners=[];this.addListeners(["layer:render","layer:render-load"])};var b=a.prototype;b["layer:render"]=function(c){this.shape.x=this.owner.x;this.shape.y=this.owner.y};b["layer:render-load"]=function(c){this.stage=c.stage;this.shape=new createjs.BitmapAnimation(this.spriteSheet);this.stage.addChild(this.shape);this.shape.gotoAndPlay(this.state)};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["render-tiles"]=(function(){var a=function(c,d){this.owner=c;this.controllerEvents=undefined;this.spriteSheet=new createjs.SpriteSheet(d.spritesheet);this.imageMap=d.imageMap||[];this.tileWidth=d.tileWidth||this.owner.tileWidth||10;this.tileHeight=d.tileHeight||this.owner.tileHeight||10;this.state=d.state||"tile";this.listeners=[];this.addListeners(["layer:render","layer:render-load"])};var b=a.prototype;b["layer:render"]=function(c){};b["layer:render-load"]=function(e){var c=0,f=0,d=this.stage=e.stage;tile=undefined;for(c=0;c<this.imageMap.length;c++){for(f=0;f<this.imageMap[c].length;f++){tile=new createjs.BitmapAnimation(this.spriteSheet);tile.x=c*this.tileWidth;tile.y=f*this.tileHeight;d.addChild(tile);tile.gotoAndPlay(this.imageMap[c][f])}}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["render-button"]=(function(){var a=function(c,d){this.owner=c;this.listeners=[];this.addListeners(["layer:render-load","layer:render","controller:input"]);this.stage=undefined;this.upBitmap=new createjs.Bitmap(gws.assets[d.upImg]);this.downBitmap=new createjs.Bitmap(gws.assets[d.downImg])};var b=a.prototype;b["controller:input-handler"]=function(c){};b["layer:render-load"]=function(c){this.stage=c.stage;this.stage.addChild(this.upBitmap);this.stage.addChild(this.downBitmap);this.upBitmap.x=this.owner.x;this.downBitmap.x=this.owner.x;this.upBitmap.y=this.owner.y;this.downBitmap.y=this.owner.y};b["layer:render"]=function(){this.upBitmap.x=this.owner.x;this.downBitmap.x=this.owner.x;if(this.owner.state){this.downBitmap.alpha=0}else{this.downBitmap.alpha=1}};b.destroy=function(){this.removeListeners(this.listeners);this.stage.removeChild(this.shape)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["render-hero"]=(function(){var a=function(d,f){this.owner=d;this.listeners=[];this.addListeners(["layer:render-load","layer:render","logical-state"]);this.stage=undefined;for(var c=0;c<f.spriteSheet.images.length;c++){f.spriteSheet.images[c]=gws.assets[f.spriteSheet.images[c]]}var e=new createjs.SpriteSheet(f.spriteSheet);this.anim=new createjs.BitmapAnimation(e);this.currentAnimation=""};var b=a.prototype;b["layer:render-load"]=function(c){this.stage=c.stage;this.stage.addChild(this.anim)};b["layer:render"]=function(c){this.anim.x=this.owner.x;this.anim.y=this.owner.y};b["logical-state"]=function(c){if(this.currentAnimation!=c.state){this.currentAnimation=c.state;this.anim.gotoAndPlay(c.state)}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["logic-button"]=(function(){var a=function(c,d){this.owner=c;this.listeners=[];this.addListeners(["layer:logic","go-left","go-right"]);this.leftMax=10;this.rightMax=100;this.direction=0};var b=a.prototype;b["go-left"]=function(c){if(c.pressed){this.direction=-1}else{this.direction=0}};b["go-right"]=function(c){if(c.pressed){this.direction=1}else{this.direction=0}};b["layer:logic"]=function(c){if(this.direction){this.owner.x+=this.direction}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["logic-hero"]=(function(){var a=function(c,d){this.owner=c;this.listeners=[];this.addListeners(["layer:logic","key-left","key-right","key-up","key-down"]);this.owner.state="standing";this.owner.heading="south";this.speed=d.speed||0.3;this.left=false;this.right=false;this.up=false;this.down=false};var b=a.prototype;b["layer:logic"]=function(e){var d=0;var c=0;if(this.left){d=-this.speed;this.owner.heading="west";this.owner.state="walking"}else{if(this.right){d=this.speed;this.owner.heading="east";this.owner.state="walking"}else{if(this.up){c=-this.speed;this.owner.heading="north";this.owner.state="walking"}else{if(this.down){c=this.speed;this.owner.heading="south";this.owner.state="walking"}else{this.owner.state="standing"}}}}this.owner.x+=(d*e);this.owner.y+=(c*e);this.left=false;this.right=false;this.up=false;this.down=false;this.owner.trigger("logical-state",{state:this.owner.state+"-"+this.owner.heading})};b["key-left"]=function(c){if(c.pressed){this.left=true}};b["key-up"]=function(c){if(c.pressed){this.up=true}};b["key-right"]=function(c){if(c.pressed){this.right=true}};b["key-down"]=function(c){if(c.pressed){this.down=true}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();gws.components["collision-hero"]=(function(){var a=function(c,d){this.owner=c;this.listeners=[];this.addListeners(["load","layer:collision"]);this.owner.AABB=d.AABB||[0,0,16,16];this.owner.collisionType=d.collisionType||"solid";this.owner.collidesWith=d.collidesWith||[]};var b=a.prototype;b.load=function(c){};b["layer:resolve-collision"]=function(c){switch(c.type){case"block":console.log(this.owner.type+": There is a collision!");break}};b.destroy=function(){this.removeListeners(this.listeners)};b.addListeners=function(d){for(var c in d){this.addListener(d[c])}};b.removeListeners=function(d){for(var c in d){this.removeListener(c,d[c])}};b.addListener=function(d,f){var c=this,e=f||function(g){c[d](g)};this.owner.bind(d,e);this.listeners[d]=e};b.removeListener=function(c,d){this.owner.unbind(c,d)};return a})();(function(){var g=navigator.userAgent.toLowerCase(),b=(g.search("ipod")>-1),k=(g.search("iphone")>-1),n=(g.search("ipad")>-1),e=(g.search("safari")>-1),d=(g.search("msie")>-1),f=(g.search("android")>-1),l=(g.search("silk")>-1),j=(g.search("firefox")>-1),i=document.createElement("audio"),m=document.documentElement,c=m.getAttribute("manifest"),h=true,o=true,a=TouchEvent in window;if((i.canPlayType)&&!(!!i.canPlayType&&""!=i.canPlayType('audio/ogg; codecs="vorbis"'))){h=false;if(d||!(!!i.canPlayType&&""!=i.canPlayType("audio/mp4"))){o=false;if(c){m.setAttribute("manifest",c.replace("ogg","mp3"))}}else{if(c){m.setAttribute("manifest",c.replace("ogg","m4a"))}}}if(c){}gws.browserCheck=function(){var q={canvas:false,mobile:false,webgl:false,transitions:false,progress:false,css3dTransforms:false,iPod:b,iPhone:k,iPad:n,iOS:b||k||n,safari:e,ie:d,android:f,silk:l,ogg:h,m4a:o,touch:a};var p=document.createElement("canvas");try{q.canvas=!!(p.getContext("2d"))}catch(r){q.canvas=!!(p.getContext)}delete p;q.webgl=false;if(window.WebGLRenderingContext){try{if(document.createElement("canvas").getContext("webgl")){q.webgl=true}}catch(r){}try{if(document.createElement("canvas").getContext("experimental-webgl")){q.webgl=true}}catch(r){}}var s=document.createElement("div");s.setAttribute("style","transition:top 1s ease;-webkit-transition:top 1s ease;-moz-transition:top 1s ease;-o-transition:top 1s ease;");q.transitions=!!((s.style.transition||s.style.webkitTransition||s.style.MozTransition||s.style.OTransition)&&!(document.all));delete s;if(window.Modernizr){q.css3dTransforms=Modernizr.csstransforms3d}q.progress=("position" in document.createElement("progress"));q.mobile=q.android||q.iOS||q.silk;return q}})();window.addEventListener("load",function(){var a=this;loader=new createjs.PreloadJS();loader.onProgress=function(d){console.log("Progress:",d)};loader.onFileLoad=function(h){var g=0,e=0,k=h.data,d=h.result,f=undefined;console.log("Load:",h);if((h.type=="image")&&k){if(k.rows&&k.columns){f=new createjs.SpriteSheet({images:[d],frames:{width:d.width/k.columns,height:d.height/k.rows}});for(e=0;e<k.rows;e++){for(g=0;g<k.columns;g++){if(k.ids&&k.ids[g]&&k.ids[g][e]){gws.assets[k.ids[g][e]]=createjs.SpriteSheetUtils.extractFrame(f,+e+(g*k.rows))}else{gws.assets[h.id+"-"+g+"_"+e]=createjs.SpriteSheetUtils.extractFrame(f,+e+(g*k.rows))}}}return}}gws.assets[h.id]=d};loader.onError=function(d){console.log("Your stuff broke!")};loader.onComplete=function(d){a.game=new gws.classes.game(gws.settings);createjs.Ticker.setFPS(gws.settings.global.fps);createjs.Ticker.addListener(a.game)};gws.browser=gws.browserCheck();for(var c in gws.settings.assets){if(typeof gws.settings.assets[c].src!=="string"){for(var b in gws.settings.assets[c].src){if(gws.browser[b]){gws.settings.assets[c].src=gws.settings.assets[c].src[b];break}}if(typeof gws.settings.assets[c].src!=="string"){if(gws.settings.assets[c].src["default"]){gws.settings.assets[c].src=gws.settings.assets[c].src["default"]}else{console.warning("Asset has no valid source for this browser.",gws.settings.assets[c])}}}}loader.loadManifest(gws.settings.assets);gws.assets=[]});